{"version":3,"file":"polpware-ngx-events.js","sources":["ng://@polpware/ngx-events/lib/services/global-events.service.ts","ng://@polpware/ngx-events/public_api.ts","ng://@polpware/ngx-events/polpware-ngx-events.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport interface FunctionSignature {\n    name: string;\n    args: any[];\n    callback?: () => void;\n}\n\n@Injectable()\nexport class GlobalEventsService {\n    private _listeners: { [key: string]: any };\n    private _subject: Subject<FunctionSignature>;\n\n    constructor() {\n        this._listeners = {};\n        this._subject = new Subject();\n\n        this._subject.asObservable().subscribe(\n            (next) => {\n                const name = next.name;\n                const args = next.args;\n                const callback = next.callback;\n                if (this._listeners[name]) {\n                    for (const listener of this._listeners[name]) {\n                        listener(...args);\n                    }\n\n                    if (callback) {\n                        callback();\n                    }\n                }\n            },\n            (error) => {\n            }\n        );\n    }\n\n    on(name: string, listener) {\n        if (!this._listeners[name]) {\n            this._listeners[name] = [];\n        }\n        this._listeners[name].push(listener);\n    }\n\n    off(name: string, listener?) {\n        if (!this._listeners[name]) {\n            return;\n        }\n        if (!listener) {\n            delete this._listeners[name];\n            return;\n        }\n\n        const callbacks = this._listeners[name];\n        let anyIndex = -1;\n        let index;\n        for (index = 0; index < callbacks.length; index++) {\n            if (callbacks[index] === listener) {\n                anyIndex = index;\n                break;\n            }\n        }\n        if (anyIndex !== -1) {\n            callbacks.splice(anyIndex, 1);\n        }\n    }\n\n    broadcast(name: string, args: any[] = [], callback: () => void = null) {\n        this._subject.next({\n            name: name,\n            args: args,\n            callback: callback\n        });\n    }\n}\n","/*\n * Public API Surface of ngx-events\n */\n\nexport * from './lib/services/global-events.service';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;MAUa,mBAAmB;IAI5B;QACI,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,EAAE,CAAC;QAE9B,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,SAAS,CAClC,CAAC,IAAI;YACD,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACvB,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACvB,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC/B,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;gBACvB,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;oBAC1C,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC;iBACrB;gBAED,IAAI,QAAQ,EAAE;oBACV,QAAQ,EAAE,CAAC;iBACd;aACJ;SACJ,EACD,CAAC,KAAK;SACL,CACJ,CAAC;KACL;IAED,EAAE,CAAC,IAAY,EAAE,QAAQ;QACrB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACxB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;SAC9B;QACD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACxC;IAED,GAAG,CAAC,IAAY,EAAE,QAAS;QACvB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACxB,OAAO;SACV;QACD,IAAI,CAAC,QAAQ,EAAE;YACX,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAC7B,OAAO;SACV;QAED,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,QAAQ,GAAG,CAAC,CAAC,CAAC;QAClB,IAAI,KAAK,CAAC;QACV,KAAK,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC/C,IAAI,SAAS,CAAC,KAAK,CAAC,KAAK,QAAQ,EAAE;gBAC/B,QAAQ,GAAG,KAAK,CAAC;gBACjB,MAAM;aACT;SACJ;QACD,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE;YACjB,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;SACjC;KACJ;IAED,SAAS,CAAC,IAAY,EAAE,OAAc,EAAE,EAAE,WAAuB,IAAI;QACjE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YACf,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,QAAQ,EAAE,QAAQ;SACrB,CAAC,CAAC;KACN;;yGAhEQ,mBAAmB;2EAAnB,mBAAmB,WAAnB,mBAAmB;+CAAnB,mBAAmB;cAD/B,UAAU;;;ACTX;;;;ACAA;;;;;;"}