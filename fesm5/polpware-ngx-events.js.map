{"version":3,"file":"polpware-ngx-events.js","sources":["ng://@polpware/ngx-events/lib/services/global-events.service.ts","ng://@polpware/ngx-events/lib/ngx-events.module.ts","ng://@polpware/ngx-events/public_api.ts","ng://@polpware/ngx-events/polpware-ngx-events.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport interface FunctionSignature {\n    name: string;\n    args: any[];\n    callback?: () => void;\n}\n\n@Injectable()\nexport class GlobalEventsService {\n    private _listeners: { [key: string]: any };\n    private _subject: Subject<FunctionSignature>;\n\n    constructor() {\n        this._listeners = {};\n        this._subject = new Subject();\n\n        this._subject.asObservable().subscribe(\n            (next) => {\n                const name = next.name;\n                const args = next.args;\n                const callback = next.callback;\n                if (this._listeners[name]) {\n                    for (const listener of this._listeners[name]) {\n                        listener(...args);\n                    }\n\n                    if (callback) {\n                        callback();\n                    }\n                }\n            },\n            (error) => {\n            }\n        );\n    }\n\n    on(name: string, listener) {\n        if (!this._listeners[name]) {\n            this._listeners[name] = [];\n        }\n        this._listeners[name].push(listener);\n    }\n\n    off(name: string, listener?) {\n        if (!this._listeners[name]) {\n            return;\n        }\n        if (!listener) {\n            delete this._listeners[name];\n            return;\n        }\n\n        const callbacks = this._listeners[name];\n        let anyIndex = -1;\n        let index;\n        for (index = 0; index < callbacks.length; index++) {\n            if (callbacks[index] === listener) {\n                anyIndex = index;\n                break;\n            }\n        }\n        if (anyIndex !== -1) {\n            callbacks.splice(anyIndex, 1);\n        }\n    }\n\n    broadcast(name: string, args: any[] = [], callback: () => void = null) {\n        this._subject.next({\n            name: name,\n            args: args,\n            callback: callback\n        });\n    }\n}\n","import {\n    ModuleWithProviders, NgModule,\n    Optional, SkipSelf\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { GlobalEventsService } from './services/global-events.service';\n\n@NgModule({\n    declarations: [],\n    imports: [\n        CommonModule\n    ]\n})\nexport class PolpNgxEventsModule {\n    constructor(@Optional() @SkipSelf() parentModule: PolpNgxEventsModule) {\n        if (parentModule) {\n            throw new Error(\n                'PolpNgxEventsModule is already loaded and please import it in the AppModule only.');\n        }\n    }\n\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: PolpNgxEventsModule,\n            providers: [GlobalEventsService]\n        };\n    }\n}\n","/*\n * Public API Surface of ngx-events\n */\n\nexport * from './lib/services/global-events.service';\nexport * from './lib/ngx-events.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}