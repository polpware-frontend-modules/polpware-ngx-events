{"version":3,"file":"polpware-ngx-events.js.map","sources":["ng://@polpware/ngx-events/lib/services/global-events.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport interface FunctionSignature {\n    name: string;\n    args: any[];\n    callback?: () => void;\n}\n\n@Injectable()\nexport class GlobalEventsService {\n    private _listeners: { [key: string]: any };\n    private _subject: Subject<FunctionSignature>;\n\n    constructor() {\n        this._listeners = {};\n        this._subject = new Subject();\n\n        this._subject.asObservable().subscribe(\n            (next) => {\n                const name = next.name;\n                const args = next.args;\n                const callback = next.callback;\n                if (this._listeners[name]) {\n                    for (const listener of this._listeners[name]) {\n                        listener(...args);\n                    }\n\n                    if (callback) {\n                        callback();\n                    }\n                }\n            },\n            (error) => {\n            }\n        );\n    }\n\n    on(name: string, listener) {\n        if (!this._listeners[name]) {\n            this._listeners[name] = [];\n        }\n        this._listeners[name].push(listener);\n    }\n\n    off(name: string, listener?) {\n        if (!this._listeners[name]) {\n            return;\n        }\n        if (!listener) {\n            delete this._listeners[name];\n            return;\n        }\n\n        const callbacks = this._listeners[name];\n        let anyIndex = -1;\n        let index;\n        for (index = 0; index < callbacks.length; index++) {\n            if (callbacks[index] === listener) {\n                anyIndex = index;\n                break;\n            }\n        }\n        if (anyIndex !== -1) {\n            callbacks.splice(anyIndex, 1);\n        }\n    }\n\n    broadcast(name: string, args: any[] = [], callback: () => void = null) {\n        this._subject.next({\n            name: name,\n            args: args,\n            callback: callback\n        });\n    }\n}\n"],"names":["tslib_1.__values"],"mappings":";;;;;;;;;IAcI;QAAA,iBAsBC;QArBG,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,EAAE,CAAC;QAE9B,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,SAAS,CAClC,UAAC,IAAI;;;gBACK,IAAI,GAAG,IAAI,CAAC,IAAI;;gBAChB,IAAI,GAAG,IAAI,CAAC,IAAI;;gBAChB,QAAQ,GAAG,IAAI,CAAC,QAAQ;YAC9B,IAAI,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;;oBACvB,KAAuB,IAAA,KAAAA,SAAA,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA,gBAAA,4BAAE;wBAAzC,IAAM,QAAQ,WAAA;wBACf,QAAQ,wBAAI,IAAI,GAAE;qBACrB;;;;;;;;;gBAED,IAAI,QAAQ,EAAE;oBACV,QAAQ,EAAE,CAAC;iBACd;aACJ;SACJ,EACD,UAAC,KAAK;SACL,CACJ,CAAC;KACL;;;;;;IAED,gCAAE;;;;;IAAF,UAAG,IAAY,EAAE,QAAQ;QACrB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACxB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;SAC9B;QACD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACxC;;;;;;IAED,iCAAG;;;;;IAAH,UAAI,IAAY,EAAE,QAAS;QACvB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACxB,OAAO;SACV;QACD,IAAI,CAAC,QAAQ,EAAE;YACX,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAC7B,OAAO;SACV;;YAEK,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;;YACnC,QAAQ,GAAG,CAAC,CAAC;;YACb,KAAK;QACT,KAAK,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC/C,IAAI,SAAS,CAAC,KAAK,CAAC,KAAK,QAAQ,EAAE;gBAC/B,QAAQ,GAAG,KAAK,CAAC;gBACjB,MAAM;aACT;SACJ;QACD,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE;YACjB,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;SACjC;KACJ;;;;;;;IAED,uCAAS;;;;;;IAAT,UAAU,IAAY,EAAE,IAAgB,EAAE,QAA2B;QAA7C,qBAAA,EAAA,SAAgB;QAAE,yBAAA,EAAA,eAA2B;QACjE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YACf,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,IAAI;YACV,QAAQ,EAAE,QAAQ;SACrB,CAAC,CAAC;KACN;;gBAjEJ,UAAU;;;;IAkEX,0BAAC;CAlED;;;;;;;;;;;;;;"}
